<%- include('../header') %>
    <main>
        <h1>Dashboard</h1>
        <div class="insights">
            <div class="expenses">
                <span class="material-icons-sharp">bar_chart</span>
                <div class="middle">
                    <div class="left">
                        <% allorder.forEach((allorder) => { %>
                        <h3>Total Order</h3>
                        <h1><%= numeral(allorder.allOrder).format() %> คำสั่งซื้อ</h1>
                        <% }) %>
                    </div>
                </div>
            </div>
            <div class="sales">
                <span class="material-icons-sharp">analytics</span>
                <div class="middle">
                    <div class="left">
                        <h3>Total Sales</h3>
                        <% allPrice.forEach((allPrice) => { %>
                        <h1><%= numeral(allPrice.allQty).format() %> ชิ้น</h1>
                    </div>
                </div>
            </div>

            <div class="income">
                <span class="material-icons-sharp">stacked_line_chart</span>
                <div class="middle">
                    <div class="left">
                        <h3>Total Income</h3>
                        <h1>$ <%= numeral(allPrice.totalPrice).format() %></h1>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>

        <div class="recent-orders">
            <h2>Recent Orders</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th width="200px">bill detail</th>
                        <th class="hid">pay_date</th>
                        <th class="hid">delivery_date</th>
                        <th>truck</th>
                        <th>status</th>
                        <th width="120px">delivery_confirm</th>
                        <th width="120px">delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% orders.forEach((order)=> { %>
                        <% if (order.status == 'complete') { %>
                        <tr>
                            <td><a href="/viewbill/<%= order.id %>">view bill no.<%= order.id %></a></td>
                            <td class="hid"><%= dayjs(order.pay_date).format(dayFormat) %></td>
                            <td class="hid"><%= dayjs(order.delivery_date).format(dayFormat) %></td>
                            <td><%= order.track_code %></td>
                            <td><%= order.status %></td>
                            <td>
                                    <a href="deliveryOrder/<%= order.id %>"><span class="material-icons-sharp">local_shipping</span></a>
                            </td>
                            <td>
                                <a href="deleteOrder/<%= order.id %>" onclick="return confirm('Are you sure delete ?')"><span class="material-icons-sharp">delete</span></a>
                            </td>
                        </tr>
                        <% } %>
                        <% }) %>
                </tbody>
            </table>
        </div>

        <div class="recent-orders">
            <h2>our user</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>username</th>
                        <th>Email</th>
                        <th>Level</th>
                    </tr>
                </thead>
                <tbody>
                    <% users.forEach((user)=> { %>
                        <tr>
                            <td><%= user.name %></td>
                            <td><%= user.username %></td>
                            <td><%= user.email %></td>
                            <td><%= user.level %></td>
                        </tr>
                        <% }); %>
                </tbody>
            </table>
        </div>
    </div>
</main>


<%- include('../footer') %>